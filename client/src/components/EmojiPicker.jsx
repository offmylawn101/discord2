import React, { useState, useMemo, useRef, useEffect } from 'react';

const EMOJI_DATA = {
  'Smileys': ['ðŸ˜€','ðŸ˜ƒ','ðŸ˜„','ðŸ˜','ðŸ˜†','ðŸ˜…','ðŸ¤£','ðŸ˜‚','ðŸ™‚','ðŸ˜Š','ðŸ˜‡','ðŸ¥°','ðŸ˜','ðŸ¤©','ðŸ˜˜','ðŸ˜—','ðŸ˜š','ðŸ˜™','ðŸ¥²','ðŸ˜‹','ðŸ˜›','ðŸ˜œ','ðŸ¤ª','ðŸ˜','ðŸ¤‘','ðŸ¤—','ðŸ¤­','ðŸ«¢','ðŸ¤«','ðŸ¤”','ðŸ«¡','ðŸ¤','ðŸ¤¨','ðŸ˜','ðŸ˜‘','ðŸ˜¶','ðŸ«¥','ðŸ˜','ðŸ˜’','ðŸ™„','ðŸ˜¬','ðŸ¤¥','ðŸ˜Œ','ðŸ˜”','ðŸ˜ª','ðŸ¤¤','ðŸ˜´','ðŸ˜·','ðŸ¤’','ðŸ¤•','ðŸ¤¢','ðŸ¤®','ðŸ¥µ','ðŸ¥¶','ðŸ¥´','ðŸ˜µ','ðŸ¤¯','ðŸ¤ ','ðŸ¥³','ðŸ¥¸','ðŸ˜Ž','ðŸ¤“','ðŸ§','ðŸ˜•','ðŸ«¤','ðŸ˜Ÿ','ðŸ™','ðŸ˜®','ðŸ˜¯','ðŸ˜²','ðŸ˜³','ðŸ¥º','ðŸ¥¹','ðŸ˜¦','ðŸ˜§','ðŸ˜¨','ðŸ˜°','ðŸ˜¥','ðŸ˜¢','ðŸ˜­','ðŸ˜±','ðŸ˜–','ðŸ˜£','ðŸ˜ž','ðŸ˜“','ðŸ˜©','ðŸ˜«','ðŸ¥±','ðŸ˜¤','ðŸ˜¡','ðŸ˜ ','ðŸ¤¬','ðŸ˜ˆ','ðŸ‘¿','ðŸ’€','â˜ ï¸','ðŸ’©','ðŸ¤¡','ðŸ‘¹','ðŸ‘º','ðŸ‘»','ðŸ‘½','ðŸ‘¾','ðŸ¤–'],
  'Gestures': ['ðŸ‘‹','ðŸ¤š','ðŸ–ï¸','âœ‹','ðŸ––','ðŸ«±','ðŸ«²','ðŸ«³','ðŸ«´','ðŸ‘Œ','ðŸ¤Œ','ðŸ¤','âœŒï¸','ðŸ¤ž','ðŸ«°','ðŸ¤Ÿ','ðŸ¤˜','ðŸ¤™','ðŸ‘ˆ','ðŸ‘‰','ðŸ‘†','ðŸ–•','ðŸ‘‡','â˜ï¸','ðŸ«µ','ðŸ‘','ðŸ‘Ž','âœŠ','ðŸ‘Š','ðŸ¤›','ðŸ¤œ','ðŸ‘','ðŸ™Œ','ðŸ«¶','ðŸ‘','ðŸ¤²','ðŸ¤','ðŸ™','âœï¸','ðŸ’…','ðŸ¤³','ðŸ’ª','ðŸ¦¾','ðŸ¦¿','ðŸ¦µ','ðŸ¦¶','ðŸ‘‚','ðŸ¦»','ðŸ‘ƒ','ðŸ§ ','ðŸ«€','ðŸ«','ðŸ¦·','ðŸ¦´','ðŸ‘€','ðŸ‘ï¸','ðŸ‘…','ðŸ‘„','ðŸ«¦'],
  'People': ['ðŸ‘¶','ðŸ‘§','ðŸ§’','ðŸ‘¦','ðŸ‘©','ðŸ§‘','ðŸ‘¨','ðŸ‘©â€ðŸ¦±','ðŸ§‘â€ðŸ¦±','ðŸ‘¨â€ðŸ¦±','ðŸ‘©â€ðŸ¦°','ðŸ§‘â€ðŸ¦°','ðŸ‘¨â€ðŸ¦°','ðŸ‘±â€â™€ï¸','ðŸ‘±','ðŸ‘±â€â™‚ï¸','ðŸ‘©â€ðŸ¦³','ðŸ§‘â€ðŸ¦³','ðŸ‘¨â€ðŸ¦³','ðŸ‘©â€ðŸ¦²','ðŸ§‘â€ðŸ¦²','ðŸ‘¨â€ðŸ¦²','ðŸ§”â€â™€ï¸','ðŸ§”','ðŸ§”â€â™‚ï¸','ðŸ‘µ','ðŸ§“','ðŸ‘´','ðŸ‘²','ðŸ‘³â€â™€ï¸','ðŸ‘³','ðŸ‘³â€â™‚ï¸','ðŸ§•','ðŸ‘®â€â™€ï¸','ðŸ‘®','ðŸ‘®â€â™‚ï¸','ðŸ‘·â€â™€ï¸','ðŸ‘·','ðŸ‘·â€â™‚ï¸','ðŸ’‚â€â™€ï¸','ðŸ’‚','ðŸ’‚â€â™‚ï¸','ðŸ•µï¸â€â™€ï¸','ðŸ•µï¸','ðŸ•µï¸â€â™‚ï¸','ðŸ‘©â€âš•ï¸','ðŸ§‘â€âš•ï¸','ðŸ‘¨â€âš•ï¸','ðŸ‘©â€ðŸŒ¾','ðŸ§‘â€ðŸŒ¾','ðŸ‘¨â€ðŸŒ¾','ðŸ‘©â€ðŸ³','ðŸ§‘â€ðŸ³','ðŸ‘¨â€ðŸ³','ðŸ‘©â€ðŸŽ“','ðŸ§‘â€ðŸŽ“','ðŸ‘¨â€ðŸŽ“','ðŸ‘©â€ðŸŽ¤','ðŸ§‘â€ðŸŽ¤','ðŸ‘¨â€ðŸŽ¤','ðŸ‘©â€ðŸ«','ðŸ§‘â€ðŸ«','ðŸ‘¨â€ðŸ«','ðŸ‘©â€ðŸ­','ðŸ§‘â€ðŸ­','ðŸ‘¨â€ðŸ­','ðŸ‘©â€ðŸ’»','ðŸ§‘â€ðŸ’»','ðŸ‘¨â€ðŸ’»','ðŸ‘©â€ðŸ’¼','ðŸ§‘â€ðŸ’¼','ðŸ‘¨â€ðŸ’¼'],
  'Hearts': ['â¤ï¸','ðŸ§¡','ðŸ’›','ðŸ’š','ðŸ’™','ðŸ’œ','ðŸ–¤','ðŸ¤','ðŸ¤Ž','ðŸ’”','â¤ï¸â€ðŸ”¥','â¤ï¸â€ðŸ©¹','â£ï¸','ðŸ’•','ðŸ’ž','ðŸ’“','ðŸ’—','ðŸ’–','ðŸ’˜','ðŸ’','ðŸ’Ÿ','â™¥ï¸','ðŸ«¶','ðŸ’‘','ðŸ’','ðŸ‘ª','ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦','ðŸ‘¨â€ðŸ‘©â€ðŸ‘§','ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦','ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦','ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§','ðŸ’','ðŸŒ¹','ðŸ¥€','ðŸŒº','ðŸŒ¸','ðŸ’®','ðŸµï¸','ðŸŒ¼','ðŸŒ»','ðŸŒ·','ðŸª·','ðŸª¹'],
  'Nature': ['ðŸ¶','ðŸ±','ðŸ­','ðŸ¹','ðŸ°','ðŸ¦Š','ðŸ»','ðŸ¼','ðŸ»â€â„ï¸','ðŸ¨','ðŸ¯','ðŸ¦','ðŸ®','ðŸ·','ðŸ¸','ðŸµ','ðŸ™ˆ','ðŸ™‰','ðŸ™Š','ðŸ’','ðŸ”','ðŸ§','ðŸ¦','ðŸ¤','ðŸ£','ðŸ¥','ðŸ¦†','ðŸ¦…','ðŸ¦‰','ðŸ¦‡','ðŸº','ðŸ—','ðŸ´','ðŸ¦„','ðŸ','ðŸª±','ðŸ›','ðŸ¦‹','ðŸŒ','ðŸž','ðŸœ','ðŸª°','ðŸª²','ðŸª³','ðŸ¦Ÿ','ðŸ¦—','ðŸ•·ï¸','ðŸ¦‚','ðŸ¢','ðŸ','ðŸ¦Ž','ðŸ¦–','ðŸ¦•','ðŸ™','ðŸ¦‘','ðŸ¦','ðŸ¦ž','ðŸ¦€','ðŸª¸','ðŸ¡','ðŸ ','ðŸŸ','ðŸ¬','ðŸ³','ðŸ‹','ðŸ¦ˆ','ðŸŠ','ðŸ…','ðŸ†','ðŸ¦“','ðŸ¦','ðŸ¦§','ðŸ˜','ðŸ¦›','ðŸ¦','ðŸª','ðŸ«','ðŸ¦’','ðŸ¦˜','ðŸ¦¬','ðŸƒ','ðŸ‚','ðŸ„','ðŸŽ','ðŸ–','ðŸ','ðŸ‘','ðŸ¦™','ðŸ','ðŸ¦Œ'],
  'Food': ['ðŸ','ðŸŽ','ðŸ','ðŸŠ','ðŸ‹','ðŸŒ','ðŸ‰','ðŸ‡','ðŸ“','ðŸ«','ðŸˆ','ðŸ’','ðŸ‘','ðŸ¥­','ðŸ','ðŸ¥¥','ðŸ¥','ðŸ…','ðŸ†','ðŸ¥‘','ðŸ¥¦','ðŸ¥¬','ðŸ¥’','ðŸŒ¶ï¸','ðŸ«‘','ðŸŒ½','ðŸ¥•','ðŸ«’','ðŸ§„','ðŸ§…','ðŸ¥”','ðŸ ','ðŸ«˜','ðŸ¥','ðŸ¥¯','ðŸž','ðŸ¥–','ðŸ¥¨','ðŸ§€','ðŸ¥š','ðŸ³','ðŸ§ˆ','ðŸ¥ž','ðŸ§‡','ðŸ¥“','ðŸ¥©','ðŸ—','ðŸ–','ðŸ¦´','ðŸŒ­','ðŸ”','ðŸŸ','ðŸ•','ðŸ«“','ðŸ¥ª','ðŸ¥™','ðŸ§†','ðŸŒ®','ðŸŒ¯','ðŸ«”','ðŸ¥—','ðŸ¥˜','ðŸ«•','ðŸ¥«','ðŸ','ðŸœ','ðŸ²','ðŸ›','ðŸ£','ðŸ±','ðŸ¥Ÿ','ðŸ¦ª','ðŸ¤','ðŸ™','ðŸš','ðŸ˜','ðŸ¥','ðŸ¥ ','ðŸ¥®','ðŸ¢','ðŸ¡','ðŸ§','ðŸ¨','ðŸ¦','ðŸ¥§','ðŸ§','ðŸ°','ðŸŽ‚','ðŸ®','ðŸ­','ðŸ¬','ðŸ«','ðŸ¿','ðŸ©','ðŸª','ðŸŒ°','ðŸ¥œ','ðŸ¯','ðŸ¥›','ðŸ¼','ðŸ«–','â˜•','ðŸµ','ðŸ§ƒ','ðŸ¥¤','ðŸ§‹','ðŸ«™','ðŸ¶','ðŸº','ðŸ»','ðŸ¥‚','ðŸ·','ðŸ«—','ðŸ¥ƒ','ðŸ¸','ðŸ¹','ðŸ§‰','ðŸ¾','ðŸ§Š','ðŸ¥„','ðŸ´','ðŸ½ï¸','ðŸ¥£','ðŸ¥¡','ðŸ¥¢','ðŸ§‚'],
  'Activity': ['âš½','ðŸ€','ðŸˆ','âš¾','ðŸ¥Ž','ðŸŽ¾','ðŸ','ðŸ‰','ðŸ¥','ðŸŽ±','ðŸª€','ðŸ“','ðŸ¸','ðŸ’','ðŸ‘','ðŸ¥','ðŸ','ðŸªƒ','ðŸ¥…','â›³','ðŸª','ðŸ¹','ðŸŽ£','ðŸ¤¿','ðŸ¥Š','ðŸ¥‹','ðŸŽ½','ðŸ›¹','ðŸ›¼','ðŸ›·','â›¸ï¸','ðŸ¥Œ','ðŸŽ¿','â›·ï¸','ðŸ‚','ðŸª‚','ðŸ‹ï¸','ðŸ¤¼','ðŸ¤¸','â›¹ï¸','ðŸ¤º','ðŸ¤¾','ðŸŒï¸','ðŸ‡','ðŸ§˜','ðŸ„','ðŸŠ','ðŸ¤½','ðŸš£','ðŸ§—','ðŸšµ','ðŸš´','ðŸ†','ðŸ¥‡','ðŸ¥ˆ','ðŸ¥‰','ðŸ…','ðŸŽ–ï¸','ðŸµï¸','ðŸŽ—ï¸','ðŸŽ«','ðŸŽŸï¸','ðŸŽª','ðŸ¤¹','ðŸŽ­','ðŸ©°','ðŸŽ¨','ðŸŽ¬','ðŸŽ¤','ðŸŽ§','ðŸŽ¼','ðŸŽ¹','ðŸ¥','ðŸª˜','ðŸŽ·','ðŸŽº','ðŸª—','ðŸŽ¸','ðŸª•','ðŸŽ»','ðŸªˆ','ðŸŽ²','â™Ÿï¸','ðŸŽ¯','ðŸŽ³','ðŸŽ®','ðŸ•¹ï¸','ðŸŽ°'],
  'Objects': ['âŒš','ðŸ“±','ðŸ“²','ðŸ’»','âŒ¨ï¸','ðŸ–¥ï¸','ðŸ–¨ï¸','ðŸ–±ï¸','ðŸ–²ï¸','ðŸ•¹ï¸','ðŸ—œï¸','ðŸ’½','ðŸ’¾','ðŸ’¿','ðŸ“€','ðŸ“¼','ðŸ“·','ðŸ“¸','ðŸ“¹','ðŸŽ¥','ðŸ“½ï¸','ðŸŽžï¸','ðŸ“ž','â˜Žï¸','ðŸ“Ÿ','ðŸ“ ','ðŸ“º','ðŸ“»','ðŸŽ™ï¸','ðŸŽšï¸','ðŸŽ›ï¸','ðŸ§­','â±ï¸','â²ï¸','â°','ðŸ•°ï¸','âŒ›','â³','ðŸ“¡','ðŸ”‹','ðŸª«','ðŸ”Œ','ðŸ’¡','ðŸ”¦','ðŸ•¯ï¸','ðŸª”','ðŸ§¯','ðŸ›¢ï¸','ðŸ’¸','ðŸ’µ','ðŸ’´','ðŸ’¶','ðŸ’·','ðŸª™','ðŸ’°','ðŸ’³','ðŸªª','ðŸ’Ž','âš–ï¸','ðŸªœ','ðŸ§°','ðŸª›','ðŸ”§','ðŸ”¨','âš’ï¸','ðŸ› ï¸','â›ï¸','ðŸªš','ðŸ”©','âš™ï¸','ðŸª¤','ðŸ§±','â›“ï¸','ðŸ§²','ðŸ”«','ðŸ’£','ðŸ§¨','ðŸª“','ðŸ”ª','ðŸ—¡ï¸','âš”ï¸','ðŸ›¡ï¸','ðŸš¬','âš°ï¸','ðŸª¦','âš±ï¸','ðŸº','ðŸ”®','ðŸ“¿','ðŸ§¿','ðŸª¬','ðŸ’ˆ','âš—ï¸','ðŸ”­','ðŸ”¬','ðŸ•³ï¸','ðŸ©»','ðŸ©¹','ðŸ©º','ðŸ’Š','ðŸ’‰','ðŸ©¸','ðŸ§¬','ðŸ¦ ','ðŸ§«','ðŸ§ª','ðŸŒ¡ï¸','ðŸ§¹','ðŸª ','ðŸ§º','ðŸ§»','ðŸš½','ðŸš°','ðŸš¿','ðŸ›','ðŸ›€','ðŸ§¼','ðŸª¥','ðŸª’','ðŸ§½','ðŸª£','ðŸ§´','ðŸ›Žï¸','ðŸ”‘','ðŸ—ï¸','ðŸšª','ðŸª‘','ðŸ›‹ï¸','ðŸ›ï¸','ðŸ›Œ','ðŸ§¸','ðŸª†','ðŸ–¼ï¸','ðŸªž','ðŸªŸ','ðŸ›ï¸','ðŸ›’','ðŸŽ','ðŸŽˆ','ðŸŽ','ðŸŽ€','ðŸª„','ðŸª…','ðŸŽŠ','ðŸŽ‰','ðŸŽŽ','ðŸ®','ðŸŽ','ðŸ§§','âœ‰ï¸','ðŸ“©','ðŸ“¨','ðŸ“§','ðŸ’Œ','ðŸ“¥','ðŸ“¤','ðŸ“¦','ðŸ·ï¸','ðŸª§','ðŸ“ª','ðŸ“«','ðŸ“¬','ðŸ“­','ðŸ“®','ðŸ“¯','ðŸ“œ','ðŸ“ƒ','ðŸ“„','ðŸ“‘','ðŸ§¾','ðŸ“Š','ðŸ“ˆ','ðŸ“‰','ðŸ—’ï¸','ðŸ—“ï¸','ðŸ“†','ðŸ“…','ðŸ—‘ï¸','ðŸ“‡','ðŸ—ƒï¸','ðŸ—³ï¸','ðŸ—„ï¸','ðŸ“‹','ðŸ“','ðŸ“‚','ðŸ—‚ï¸','ðŸ—žï¸','ðŸ“°','ðŸ““','ðŸ“”','ðŸ“’','ðŸ“•','ðŸ“—','ðŸ“˜','ðŸ“™','ðŸ“š','ðŸ“–','ðŸ”–','ðŸ§·','ðŸ”—','ðŸ“Ž','ðŸ–‡ï¸','ðŸ“','ðŸ“','ðŸ§®','ðŸ“Œ','ðŸ“','âœ‚ï¸','ðŸ–Šï¸','ðŸ–‹ï¸','âœ’ï¸','ðŸ–Œï¸','ðŸ–ï¸','ðŸ“','âœï¸','ðŸ”','ðŸ”Ž','ðŸ”','ðŸ”','ðŸ”’','ðŸ”“'],
  'Symbols': ['â¤ï¸','ðŸ§¡','ðŸ’›','ðŸ’š','ðŸ’™','ðŸ’œ','ðŸ–¤','ðŸ¤','ðŸ¤Ž','ðŸ’”','â¤ï¸â€ðŸ”¥','â¤ï¸â€ðŸ©¹','â£ï¸','ðŸ’•','ðŸ’ž','ðŸ’“','ðŸ’—','ðŸ’–','ðŸ’˜','ðŸ’','ðŸ’Ÿ','â˜®ï¸','âœï¸','â˜ªï¸','ðŸ•‰ï¸','â˜¸ï¸','âœ¡ï¸','ðŸ”¯','ðŸ•Ž','â˜¯ï¸','â˜¦ï¸','ðŸ›','â›Ž','â™ˆ','â™‰','â™Š','â™‹','â™Œ','â™','â™Ž','â™','â™','â™‘','â™’','â™“','ðŸ†”','âš›ï¸','ðŸ‰‘','â˜¢ï¸','â˜£ï¸','ðŸ“´','ðŸ“³','ðŸˆ¶','ðŸˆš','ðŸˆ¸','ðŸˆº','ðŸˆ·ï¸','âœ´ï¸','ðŸ†š','ðŸ’®','ðŸ‰','ãŠ™ï¸','ãŠ—ï¸','ðŸˆ´','ðŸˆµ','ðŸˆ¹','ðŸˆ²','ðŸ…°ï¸','ðŸ…±ï¸','ðŸ†Ž','ðŸ†‘','ðŸ…¾ï¸','ðŸ†˜','âŒ','â­•','ðŸ›‘','â›”','ðŸ“›','ðŸš«','ðŸ’¯','ðŸ’¢','â™¨ï¸','ðŸš·','ðŸš¯','ðŸš³','ðŸš±','ðŸ”ž','ðŸ“µ','ðŸš­','â—','â•','â“','â”','â€¼ï¸','â‰ï¸','ðŸ”…','ðŸ”†','ã€½ï¸','âš ï¸','ðŸš¸','ðŸ”±','âšœï¸','ðŸ”°','â™»ï¸','âœ…','ðŸˆ¯','ðŸ’¹','â‡ï¸','âœ³ï¸','âŽ','ðŸŒ','ðŸ’ ','â“‚ï¸','ðŸŒ€','ðŸ’¤','ðŸ§','ðŸš¾','â™¿','ðŸ…¿ï¸','ðŸ›—','ðŸˆ³','ðŸˆ‚ï¸','ðŸ›‚','ðŸ›ƒ','ðŸ›„','ðŸ›…','ðŸš¹','ðŸšº','ðŸš¼','âš§ï¸','ðŸš»','ðŸš®','ðŸŽ¦','ðŸ“¶','ðŸˆ','ðŸ”£','â„¹ï¸','ðŸ”¤','ðŸ”¡','ðŸ” ','ðŸ†–','ðŸ†—','ðŸ†™','ðŸ†’','ðŸ†•','ðŸ†“','0ï¸âƒ£','1ï¸âƒ£','2ï¸âƒ£','3ï¸âƒ£','4ï¸âƒ£','5ï¸âƒ£','6ï¸âƒ£','7ï¸âƒ£','8ï¸âƒ£','9ï¸âƒ£','ðŸ”Ÿ','ðŸ”¢','#ï¸âƒ£','*ï¸âƒ£','âï¸','â–¶ï¸','â¸ï¸','â¯ï¸','â¹ï¸','âºï¸','â­ï¸','â®ï¸','â©','âª','â«','â¬','â—€ï¸','ðŸ”¼','ðŸ”½','âž¡ï¸','â¬…ï¸','â¬†ï¸','â¬‡ï¸','â†—ï¸','â†˜ï¸','â†™ï¸','â†–ï¸','â†•ï¸','â†”ï¸','â†ªï¸','â†©ï¸','â¤´ï¸','â¤µï¸','ðŸ”€','ðŸ”','ðŸ”‚','ðŸ”„','ðŸ”ƒ','ðŸŽµ','ðŸŽ¶','âž•','âž–','âž—','âœ–ï¸','ðŸŸ°','â™¾ï¸','ðŸ’²','ðŸ’±','â„¢ï¸','Â©ï¸','Â®ï¸','ã€°ï¸','âž°','âž¿','ðŸ”š','ðŸ”™','ðŸ”›','ðŸ”','ðŸ”œ','âœ”ï¸','â˜‘ï¸','ðŸ”˜','ðŸ”´','ðŸŸ ','ðŸŸ¡','ðŸŸ¢','ðŸ”µ','ðŸŸ£','âš«','âšª','ðŸŸ¤','ðŸ”º','ðŸ”»','ðŸ”¸','ðŸ”¹','ðŸ”¶','ðŸ”·','ðŸ”³','ðŸ”²','â–ªï¸','â–«ï¸','â—¾','â—½','â—¼ï¸','â—»ï¸','ðŸŸ¥','ðŸŸ§','ðŸŸ¨','ðŸŸ©','ðŸŸ¦','ðŸŸª','â¬›','â¬œ','ðŸŸ«','ðŸ”ˆ','ðŸ”‡','ðŸ”‰','ðŸ”Š','ðŸ””','ðŸ”•','ðŸ“£','ðŸ“¢','ðŸ‘ï¸â€ðŸ—¨ï¸','ðŸ’¬','ðŸ’­','ðŸ—¯ï¸','â™ ï¸','â™£ï¸','â™¥ï¸','â™¦ï¸','ðŸƒ','ðŸŽ´','ðŸ€„','ðŸ•','ðŸ•‘','ðŸ•’','ðŸ•“','ðŸ•”','ðŸ••','ðŸ•–','ðŸ•—','ðŸ•˜','ðŸ•™','ðŸ•š','ðŸ•›'],
  'Flags': ['ðŸ³ï¸','ðŸ´','ðŸ','ðŸš©','ðŸ³ï¸â€ðŸŒˆ','ðŸ³ï¸â€âš§ï¸','ðŸ´â€â˜ ï¸','ðŸ‡ºðŸ‡¸','ðŸ‡¬ðŸ‡§','ðŸ‡¨ðŸ‡¦','ðŸ‡¦ðŸ‡º','ðŸ‡©ðŸ‡ª','ðŸ‡«ðŸ‡·','ðŸ‡¯ðŸ‡µ','ðŸ‡°ðŸ‡·','ðŸ‡¨ðŸ‡³','ðŸ‡®ðŸ‡³','ðŸ‡§ðŸ‡·','ðŸ‡²ðŸ‡½','ðŸ‡ªðŸ‡¸','ðŸ‡®ðŸ‡¹','ðŸ‡·ðŸ‡º','ðŸ‡³ðŸ‡±','ðŸ‡¸ðŸ‡ª','ðŸ‡³ðŸ‡´','ðŸ‡©ðŸ‡°','ðŸ‡«ðŸ‡®','ðŸ‡µðŸ‡±','ðŸ‡ºðŸ‡¦','ðŸ‡¹ðŸ‡·','ðŸ‡ªðŸ‡¬','ðŸ‡¿ðŸ‡¦','ðŸ‡³ðŸ‡¬','ðŸ‡°ðŸ‡ª','ðŸ‡¦ðŸ‡·','ðŸ‡¨ðŸ‡±','ðŸ‡¨ðŸ‡´','ðŸ‡µðŸ‡ª','ðŸ‡»ðŸ‡ª','ðŸ‡µðŸ‡­','ðŸ‡¹ðŸ‡­','ðŸ‡»ðŸ‡³','ðŸ‡®ðŸ‡©','ðŸ‡²ðŸ‡¾','ðŸ‡¸ðŸ‡¬','ðŸ‡³ðŸ‡¿','ðŸ‡®ðŸ‡ª','ðŸ‡¨ðŸ‡­','ðŸ‡¦ðŸ‡¹','ðŸ‡§ðŸ‡ª','ðŸ‡µðŸ‡¹','ðŸ‡¬ðŸ‡·','ðŸ‡¨ðŸ‡¿','ðŸ‡·ðŸ‡´','ðŸ‡­ðŸ‡º','ðŸ‡®ðŸ‡±','ðŸ‡¸ðŸ‡¦','ðŸ‡¦ðŸ‡ª','ðŸ‡¶ðŸ‡¦','ðŸ‡°ðŸ‡¼','ðŸ‡§ðŸ‡­'],
};

const CATEGORY_ICONS = {
  'Smileys': 'ðŸ˜€',
  'Gestures': 'ðŸ‘‹',
  'People': 'ðŸ‘¤',
  'Hearts': 'â¤ï¸',
  'Nature': 'ðŸ»',
  'Food': 'ðŸ”',
  'Activity': 'âš½',
  'Objects': 'ðŸ’¡',
  'Symbols': 'ðŸ”£',
  'Flags': 'ðŸ',
};

export default function EmojiPicker({ onSelect, onClose }) {
  const [search, setSearch] = useState('');
  const [activeCategory, setActiveCategory] = useState('Smileys');
  const pickerRef = useRef(null);
  const gridRef = useRef(null);

  useEffect(() => {
    const handler = (e) => {
      if (pickerRef.current && !pickerRef.current.contains(e.target)) {
        onClose();
      }
    };
    document.addEventListener('mousedown', handler);
    return () => document.removeEventListener('mousedown', handler);
  }, [onClose]);

  const filteredEmojis = useMemo(() => {
    if (!search) return EMOJI_DATA;
    const result = {};
    for (const [cat, emojis] of Object.entries(EMOJI_DATA)) {
      // Simple search: just show all emojis (emoji search is hard without names)
      // In a real app you'd have emoji names to search against
      result[cat] = emojis;
    }
    return result;
  }, [search]);

  const scrollToCategory = (cat) => {
    setActiveCategory(cat);
    const el = gridRef.current?.querySelector(`[data-category="${cat}"]`);
    if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
  };

  return (
    <div className="emoji-picker-full" ref={pickerRef}>
      <div className="emoji-picker-header">
        <input
          className="emoji-picker-search"
          placeholder="Search emoji"
          value={search}
          onChange={e => setSearch(e.target.value)}
          autoFocus
        />
      </div>
      <div className="emoji-picker-categories">
        {Object.entries(CATEGORY_ICONS).map(([cat, icon]) => (
          <button
            key={cat}
            className={`emoji-picker-cat-btn ${activeCategory === cat ? 'active' : ''}`}
            onClick={() => scrollToCategory(cat)}
            title={cat}
          >
            {icon}
          </button>
        ))}
      </div>
      <div className="emoji-picker-grid" ref={gridRef}>
        {Object.entries(filteredEmojis).map(([category, emojis]) => (
          <div key={category} data-category={category}>
            <div className="emoji-picker-category-label">{category}</div>
            <div className="emoji-grid">
              {emojis.map((emoji, i) => (
                <button
                  key={`${category}-${i}`}
                  className="emoji-btn"
                  onClick={() => { onSelect(emoji); onClose(); }}
                >
                  {emoji}
                </button>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
